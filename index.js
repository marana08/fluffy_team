import{a as U,i as f,S as _,N as F,P as J,A as K,R as G,b as N}from"./assets/vendor-BMg9SRtg.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const Q=document.querySelector(".header-burger-menu"),C=document.querySelector(".header-modal"),X=document.querySelector(".modal-close-button");document.querySelector(".modal-navigation-item");const Y=document.querySelector(".modal-navigation-list"),Z=document.querySelector(".modal-button");function T(e){C.classList.remove("is-open")}document.addEventListener("keydown",e=>{const t=e.key==="Escape",r=C.classList.contains("is-open");t&&r&&clos});Z.addEventListener("click",T);Q.addEventListener("click",e=>{e.preventDefault(),C.classList.add("is-open")});X.addEventListener("click",T);Y.addEventListener("click",e=>{e.target.classList.contains("modal-navigation-link")&&T()});const c={categoryList:document.querySelector(".js-category-list"),petsList:document.querySelector(".js-pets-list"),loader:document.querySelector(".js-loader"),petsLoadMoreBtn:document.querySelector(".js-pets-load-more-btn"),petsListPagination:document.querySelector(".pagination")},g={page:1,limit:6},ee="https://paw-hut.b.goit.study/api",w={animals:"/animals",categories:"/categories",orders:"/orders",feedbacks:"/feedbacks"},L=U.create({baseURL:ee});async function te(e=g.page){try{const t=typeof g.limit=="number"&&g.limit>0?g.limit:6,r=typeof e=="number"&&e>=1?e:1;return(await L.get(`${w.feedbacks}`,{params:{limit:t,page:r}})).data.feedbacks}catch{return null}}function p(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.error("Error saving to LocalStorage:",r)}}function V(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.error("Error loading from LocalStorage:",t),null}}const D="/fluffy_team/assets/sprite-C5gMIK71.svg";let P=re(),a=V("page"),I,d=V("categoryId")??null;document.addEventListener("DOMContentLoaded",oe);c.petsLoadMoreBtn.addEventListener("click",ae);c.categoryList.addEventListener("click",ne);c.petsListPagination.addEventListener("click",se);function re(){return window.innerWidth>=1440?9:8}function A(){return Math.ceil(I/P)}async function oe(e){v(),a=1,d=null,p("page",1),p("categoryId",null);try{const t=await ie(),r=await b();de(t),H(r),R(),h()}catch{f.error({title:"Помилка",message:"Щось пішло не так",position:"topRight"})}finally{S()}}async function ne(e){if(e.target.nodeName!=="BUTTON")return;const t=e.target.textContent;d=e.target.closest("li").dataset.id,a=1;let s;v(),c.categoryList.querySelectorAll(".category-btn").forEach(n=>{n.classList.remove("current")}),e.target.classList.add("current");try{t!=="Всі"?s=await O(d,a):s=await b(),H(s),h(),R()}catch{f.error({title:"Помилка",message:"Щось пішло не так",position:"topRight"})}finally{S(),p("categoryId",d),p("page",a)}}async function ae(){a+=1,c.loader.classList.add("loader-center"),v();try{if(d){h();const t=await O(d,a),r=M(t);c.petsList.insertAdjacentHTML("beforeend",r)}else{h();const t=await b(a),r=M(t);c.petsList.insertAdjacentHTML("beforeend",r)}const e=c.petsList.querySelector("li");if(e){const t=e.getBoundingClientRect();window.scrollBy({top:t.height,behavior:"smooth"})}}catch{f.error({title:"Помилка",message:"Щось пішло не так",position:"topRight"})}finally{S(),p("page",a),c.loader.classList.remove("loader-center")}}async function se(e){const t=e.target.closest("button");if(!t)return;let r;const s=A();t.dataset.action==="prev"&&a>1&&(a-=1),t.dataset.action==="next"&&a<s&&(a+=1),t.dataset.page&&(a=Number(t.dataset.page)),v();try{d?r=await O(d,a):r=await b(a),H(r),R(),window.scrollTo({top:c.petsList.offsetTop-80,behavior:"smooth"})}catch{f.error({title:"Помилка",message:"Щось пішло не так",position:"topRight"})}finally{S(),p("page",a)}}async function ie(e){return(await L.get(`${w.categories}`)).data}async function b(e){const t=await L.get(`${w.animals}`,{params:{limit:P,page:e}});return I=t.data.totalItems,t.data.animals}async function O(e,t){const r=await L.get(`${w.animals}?categoryId=${e}`,{params:{limit:P,page:t}});return I=r.data.totalItems,r.data.animals}function ce(e){return`
     <li class="category-item" data-id="${e._id}">
        <button class="category-btn" type="button">${e.name}</button>
      </li>`}function le(e){return e.reverse().map(ce).join("")}function de(e){const t=` <li class="category-item">
        <button class="category-btn current" type="button">Всі</button>
      </li>${le(e)}`;c.categoryList.innerHTML=t}function ue({_id:e,name:t,image:r,species:s,age:o,gender:n,categories:l,description:k}){const q=l.map(B=>`<li class="pets-category-item">${B.name}</li>`).join("");return`
     <li class="pets-item" data-id="${e}">
     <div class="pets-img-wrapper"><img class="pets-img" src="${r}" alt="${t} - ${s}" /></div>
        <div class="pets-list-wrapper">
          <p class="pets-category">${s}</p>
          <h3 class="pets-name">${t}</h3>
          <ul class="pets-category-list">${q}</ul>
          <div class="descriprion-wrapper">
            <ul class="descriprion-list">
              <li class="descriprion-item">${o}</li>
              <li class="descriprion-item">${n}</li>
            </ul>
            <p class="pets-descriprion">${k}</p>
            <button class="pets-button" type="button">Дізнатись більше</button>
          </div>
        </div>
      </li>`}function M(e){return e.map(ue).join("")}function H(e){const t=M(e);c.petsList.innerHTML=t}function R(){const e=A();if(e<=1)return;let t="";if(t+=`<li>
      <button class="pagination-btn-arrow" data-action="prev" aria-label="Попередня сторінка" ${a===1?"disabled":""}>
        <svg class="arrow-icon" aria-hidden="true" width="24" height="24">
          <use href="${D}#icon-arrow-back"></use>
        </svg>
      </button>
    </li>`,a===1){for(let r=1;r<=Math.min(3,e);r+=1)t+=m(r);e>3&&(t+='<li class="dots">…</li>',t+=m(e))}else{t+=m(1),a>3&&(t+='<li class="dots">…</li>');for(let r=a-1;r<=a+1;r+=1)r>1&&r<e&&(t+=m(r));a<e-2&&(t+='<li class="dots">…</li>'),e>1&&(t+=m(e))}t+=`<li>
      <button class="pagination-btn-arrow" data-action="next" aria-label="Наступна сторінка" ${a===e?"disabled":""}>
        <svg class="arrow-icon" aria-hidden="true" width="24" height="24">
          <use href="${D}#icon-arrow-forward"></use>
        </svg>
      </button>
    </li>`,c.petsListPagination.innerHTML=t}function m(e){return`
    <li>
      <button
        class="pagination-btn ${a===e?"current":""}"
        aria-label="Сторінка ${e}"
        data-page="${e}">
        ${e}
      </button>
    </li>
  `}function v(){c.loader.classList.remove("loader-hidden")}function S(){c.loader.classList.add("loader-hidden")}function pe(){c.petsLoadMoreBtn.classList.remove("pets-load-more-btn-hidden")}function me(){c.petsLoadMoreBtn.classList.add("pets-load-more-btn-hidden")}function h(){const e=A();a>=e?me():pe()}new _(".mySwiper",{modules:[F,J],slidesPerView:1,wrapperClass:"about-swiper-wrapper",slideClass:"about-swiper-slide",navigation:{nextEl:".about-swiper-button-next",prevEl:".about-swiper-button-prev"},pagination:{el:".about-swiper-pagination",clickable:!0},spaceBetween:0,loop:!1,breakpoints:{0:{slidesPerView:1}}});new K(".accordion-container",{showMultiple:!1,collapse:!0,duration:300,onOpen(e){const t=e.querySelector(".ac-panel");if(!t)return;const r=t.getBoundingClientRect();if(r.bottom>window.innerHeight){const s=r.bottom-window.innerHeight+20;window.scrollBy({top:s,behavior:"smooth"})}}});const fe=document.querySelectorAll(".faq-question-btn");fe.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-label",t?"Закрити відповідь":"Відкрити відповідь")})});function ge(e){const t=document.querySelector(".swiper-wrapper"),r=e.map(({description:s,rate:o,author:n})=>`
        <div class="swiper-slide">
          <div class="star-rating" data-score="${o}"></div>     
            <p class="storie-text">${s}</p>
            <p class="storie-names">${n}</p>  
        </div>`).join("");t.insertAdjacentHTML("beforeend",r),document.querySelectorAll(".star-rating").forEach(s=>{new G(s,{starType:"svg",readOnly:!0}).init()})}const W=document.querySelector(".stories-loader"),ye=document.querySelector(".swiper-controls");function x(e){f.info({message:e,position:"topRight",color:"#f2aaaaff",icon:!1,progressBar:!1,messageColor:"black"})}function y(){W.classList.remove("loader")}function he(){W.classList.add("loader")}function we(){ye.classList.remove("visually-hidden")}window.addEventListener("DOMContentLoaded",async()=>{he();try{let e=await te();if(e===null){x("Не вдалося завантажити історії. Спробуйте пізніше"),y();const r=document.querySelector(".swiper-wrapper");r&&(r.innerHTML='<p class="error-swiper">Не вдалося завантажити історії</p>');return}if(e.length===0){x("Нажаль, історії зараз недоступні"),y();const r=document.querySelector(".swiper-wrapper");r&&(r.innerHTML='<p class="error-swiper">Нажаль, історії зараз недоступні</p>');return}ge(e);const t=new _(".swiper",{direction:"horizontal",loop:!1,speed:400,spaceBetween:32,pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{768:{slidesPerView:2}}});we(),y()}catch{x("Cталась помилка. Спробуйте пізніше");const t=document.querySelector(".swiper-wrapper");t&&(t.innerHTML='<p class="error-swiper">Нажаль, історії зараз недоступні</p>'),y()}});const u=document.getElementById("order-form"),E=document.getElementById("modal-order"),Le=E.querySelector(".modal-close-btn");function $(){E.classList.add("visually-hidden"),document.body.classList.remove("modal-open"),window.removeEventListener("keydown",be)}function be(e){e.key==="Escape"&&$()}function ve(e){e.target===E&&$()}Le.addEventListener("click",$);E.addEventListener("click",ve);u.addEventListener("submit",async e=>{e.preventDefault();const{name:t,phone:r,comments:s}=e.target.elements,o=t.value.trim();let n=r.value.trim();const l=s.value.trim(),k=u.querySelectorAll(".input-error"),q=u.querySelectorAll(".error-text");if(k.forEach(i=>i.classList.remove("input-error")),q.forEach(i=>i.textContent=""),o.length>32){const i=u.querySelector('.modal-form-input[type="text"]');i.classList.add("input-error"),i.nextElementSibling.textContent="Ім'я не повинно перевищувати 32 символи.";return}const B=/^[0-9]{12}$/;if(n[0]==="+"&&(n=n.slice(1)),n.length!==12){const i=u.querySelector('.modal-form-input[type="tel"]');i.classList.add("input-error"),i.nextElementSibling.textContent="Телефон повинен містити 12 цифр.";return}if(!B.test(n)){const i=u.querySelector('.modal-form-input[type="tel"]');i.classList.add("input-error"),i.nextElementSibling.textContent="Телефон повинен містити лише цифри.";return}if(l.length>255){const i=u.querySelector(".modal-form-textarea");i.classList.add("input-error"),i.nextElementSibling.textContent="Коментар не повинен перевищувати 255 символів.";return}const z={name:o,phone:n,animalId:"667ad1b8e4b01a2b3c4d5e55",comment:l.length>0?l:"Без коментарів"};try{const j=(await U.post("https://paw-hut.b.goit.study/api/orders",z)).data;return N.fire({title:"Дякуємо за вашу заявку!",text:`Ваш номер замовлення: ${j._id}`,icon:"success",confirmButtonText:"Закрити"}),e.target.reset(),$(),j}catch(i){N.fire({title:"Помилка!",text:"Сталася помилка при надсиланні заявки. Спробуйте ще раз пізніше.",icon:"error",confirmButtonText:"Закрити"}),console.error("Error submitting order:",i)}});
//# sourceMappingURL=index.js.map
